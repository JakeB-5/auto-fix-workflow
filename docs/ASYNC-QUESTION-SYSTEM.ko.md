# ë¹„ë™ê¸° ì§ˆë¬¸ ì‹œìŠ¤í…œ

[English](./ASYNC-QUESTION-SYSTEM.md) | í•œêµ­ì–´

> ì™„ì „ ìë™í™” ì›Œí¬í”Œë¡œìš°ì—ì„œ ì‚¬ëŒ ê°œì…ì´ í•„ìš”í•œ ìƒí™©ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ì„¤ê³„ ë¬¸ì„œ

## ë¬¸ì œ ì •ì˜

ì™„ì „ ìë™í™”ëœ ì›Œí¬í”Œë¡œìš°(ì´ìŠˆ â†’ ìˆ˜ì • â†’ ë°°í¬)ì—ì„œ ì—ì´ì „íŠ¸ê°€ ì‚¬ëŒì˜ ì…ë ¥ì´ í•„ìš”í•œ ìƒí™©:

- ë¶ˆëª…í™•í•œ ìš”êµ¬ì‚¬í•­
- ì—¬ëŸ¬ ìœ íš¨í•œ ìˆ˜ì • ë°©ë²• ì¤‘ ì„ íƒ
- ë³´ì•ˆ/ê¶Œí•œ ê´€ë ¨ ê²°ì •
- ë¸Œë ˆì´í‚¹ ì²´ì¸ì§€ í™•ì¸

í‘œì¤€ `AskUserQuestion` ë„êµ¬ëŠ” ì‚¬ëŒì´ ìˆëŠ” ëŒ€í™”í˜• ì„¸ì…˜ì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤. ìë™í™” ì›Œí¬í”Œë¡œìš°(cron, webhook)ëŠ” ì‘ë‹µí•  ì‚¬ëŒ ì—†ì´ í—¤ë“œë¦¬ìŠ¤ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤.

## í˜„ì¬ í•œê³„

```
ëŒ€í™”í˜• ì„¸ì…˜ (ì‘ë™í•¨)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User â—„â”€â”€â”€â”€â”€â”€â–º Claude â—„â”€â”€â”€â”€â”€â”€â–º MCP Server               â”‚
â”‚    â”‚              â”‚                                     â”‚
â”‚    â””â”€â”€ AskUserQuestion ì‘ë‹µ â”€â”€â”˜                         â”‚
â”‚         (ì‚¬ëŒì´ ì¦‰ì‹œ ì‘ë‹µ)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ìë™í™” ì›Œí¬í”Œë¡œìš° (ë¸”ë¡œí‚¹)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Cron/Webhook â”€â”€â–º Claude â”€â”€â–º MCP Server                 â”‚
â”‚       ?              â”‚                                  â”‚
â”‚       â””â”€â”€ AskUserQuestion â”€â”€â–º ??? (ì‘ë‹µí•  ì‚¬ëŒ ì—†ìŒ)     â”‚
â”‚                              â”‚                          â”‚
â”‚                              â””â”€â”€ ì›Œí¬í”Œë¡œìš° ë©ˆì¶¤ âŒ       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì œì•ˆ ì†”ë£¨ì…˜: ë¹„ë™ê¸° ì§ˆë¬¸ ì‹œìŠ¤í…œ

### ì•„í‚¤í…ì²˜ ê°œìš”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ì´ìŠˆ ì²˜ë¦¬                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ë¶„ì„ ì—ì´ì „íŠ¸                               â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ë†’ì€ ì‹ ë¢°ë„  â”‚    â”‚ ì¤‘ê°„ ì‹ ë¢°ë„  â”‚    â”‚ ë‚®ì€ ì‹ ë¢°ë„          â”‚ â”‚
â”‚  â”‚ (â‰¥80%)      â”‚    â”‚ (50-80%)    â”‚    â”‚ (<50%)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                  â”‚                      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                      â”‚
          â–¼                  â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ ìë™ ìˆ˜ì •   â”‚    â”‚ ì§ˆë¬¸ ë“±ë¡       â”‚    â”‚ ê±´ë„ˆë›°ê¸°/ìˆ˜ë™â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â”‚ & ì¼ì‹œì¤‘ì§€      â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚
          â”‚                   â–¼
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚         ì§ˆë¬¸ ì €ì¥ì†Œ                   â”‚
          â”‚          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
          â”‚          â”‚  â”‚ questionId: "q-123"           â”‚  â”‚
          â”‚          â”‚  â”‚ issueNumber: 456              â”‚  â”‚
          â”‚          â”‚  â”‚ question: "ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ?"      â”‚  â”‚
          â”‚          â”‚  â”‚ options: ["A", "B", "C"]      â”‚  â”‚
          â”‚          â”‚  â”‚ status: "pending"             â”‚  â”‚
          â”‚          â”‚  â”‚ timeout: "2024-01-15T12:00Z"  â”‚  â”‚
          â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚                                 â”‚
          â”‚          â–¼                                 â–¼
          â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   â”‚ Slack ë´‡    â”‚                 â”‚ GitHub      â”‚
          â”‚   â”‚ ì•Œë¦¼        â”‚                 â”‚ ëŒ“ê¸€        â”‚
          â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚          â”‚                               â”‚
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                      â”‚
          â”‚                      â–¼ ì‚¬ëŒì´ ì‘ë‹µ
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚         Webhook í•¸ë“¤ëŸ¬              â”‚
          â”‚          â”‚  - ì‘ë‹µ ê²€ì¦                        â”‚
          â”‚          â”‚  - ì§ˆë¬¸ ìƒíƒœ ì—…ë°ì´íŠ¸                â”‚
          â”‚          â”‚  - ì›Œí¬í”Œë¡œìš° ì¬ê°œ íŠ¸ë¦¬ê±°            â”‚
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚
          â”‚                           â–¼
          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚          â”‚         ì›Œí¬í”Œë¡œìš° ìƒíƒœ ì €ì¥ì†Œ        â”‚
          â”‚          â”‚  - ì²´í¬í¬ì¸íŠ¸ ë¡œë“œ                   â”‚
          â”‚          â”‚  - ì‘ë‹µ ì£¼ì…                        â”‚
          â”‚          â”‚  - ì²˜ë¦¬ ì¬ê°œ                        â”‚
          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                      â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ PR ìƒì„±         â”‚
                            â”‚ & ë°°í¬          â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### êµ¬ì„± ìš”ì†Œ

#### 1. ì§ˆë¬¸ ì €ì¥ì†Œ (Question Store)

ë©”íƒ€ë°ì´í„°ì™€ í•¨ê»˜ ëŒ€ê¸° ì¤‘ì¸ ì§ˆë¬¸ì„ ì €ì¥í•©ë‹ˆë‹¤.

```typescript
interface PendingQuestion {
  questionId: string;
  issueNumber: number;
  workflowRunId: string;

  // ì§ˆë¬¸ ë‚´ìš©
  question: string;
  context?: string;           // ì½”ë“œ ìŠ¤ë‹ˆí«, ë¡œê·¸ ë“±
  options?: QuestionOption[]; // ê°ê´€ì‹ ì˜µì…˜

  // ì•Œë¦¼ ì„¤ì •
  notifyChannels: NotifyChannel[];
  notifiedAt?: Date;

  // íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
  createdAt: Date;
  timeoutAt: Date;
  timeoutAction: 'skip' | 'default' | 'escalate' | 'fail';
  defaultAnswer?: string;

  // ì‘ë‹µ
  status: 'pending' | 'answered' | 'timeout' | 'cancelled';
  answer?: string;
  answeredBy?: string;
  answeredAt?: Date;
}

interface QuestionOption {
  value: string;
  label: string;
  description?: string;
  isDefault?: boolean;
}

type NotifyChannel =
  | { type: 'github'; issueNumber: number }
  | { type: 'slack'; channel: string; mention?: string[] }
  | { type: 'email'; recipients: string[] };
```

#### 2. ì›Œí¬í”Œë¡œìš° ìƒíƒœ ì €ì¥ì†Œ (Workflow State Store)

ì¬ê°œë¥¼ ìœ„í•´ ì›Œí¬í”Œë¡œìš° ìƒíƒœë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

```typescript
interface WorkflowState {
  runId: string;
  issueNumber: number;

  status: 'running' | 'suspended' | 'completed' | 'failed';
  currentStep: string;

  // ì¬ê°œë¥¼ ìœ„í•œ ì²´í¬í¬ì¸íŠ¸
  checkpoint: {
    step: string;
    data: Record<string, unknown>;
    pendingQuestionId?: string;
  };

  // ê°ì‚¬ ì¶”ì 
  history: WorkflowEvent[];

  createdAt: Date;
  updatedAt: Date;
  suspendedAt?: Date;
  resumedAt?: Date;
}

interface WorkflowEvent {
  timestamp: Date;
  type: 'started' | 'step_completed' | 'suspended' | 'resumed' | 'completed' | 'failed';
  step?: string;
  details?: Record<string, unknown>;
}
```

#### 3. ì•Œë¦¼ ì„œë¹„ìŠ¤ (Notification Service)

êµ¬ì„±ëœ ì±„ë„ì„ í†µí•´ ì§ˆë¬¸ì„ ì „ì†¡í•©ë‹ˆë‹¤.

```typescript
interface NotificationService {
  // êµ¬ì„±ëœ ëª¨ë“  ì±„ë„ë¡œ ì§ˆë¬¸ ì „ì†¡
  notify(question: PendingQuestion): Promise<NotificationResult[]>;

  // ì±„ë„ë³„ êµ¬í˜„
  notifyGitHub(question: PendingQuestion, issueNumber: number): Promise<void>;
  notifySlack(question: PendingQuestion, channel: string, mention?: string[]): Promise<void>;
  notifyEmail(question: PendingQuestion, recipients: string[]): Promise<void>;
}
```

**GitHub ëŒ“ê¸€ í˜•ì‹:**

```markdown
## ğŸ¤– ì—ì´ì „íŠ¸ ì§ˆë¬¸

ìë™í™” ì›Œí¬í”Œë¡œìš°ê°€ ì§„í–‰í•˜ê¸° ìœ„í•´ ì…ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ì§ˆë¬¸
null ì°¸ì¡° ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•˜ëŠ” ë° ì–´ë–¤ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œìš”?

### ì„ íƒì§€
- [ ] **A) null ì²´í¬ ì¶”ê°€** - ê°„ë‹¨í•œ ê°€ë“œ ì ˆ, ìµœì†Œí•œì˜ ë³€ê²½
- [ ] **B) ì¡°ê¸° ì´ˆê¸°í™”** - ê°ì²´ê°€ ì¡´ì¬í•˜ë„ë¡ ë¦¬íŒ©í† ë§
- [ ] **C) ì˜µì…”ë„ ì²´ì´ë‹** - ì „ì²´ì— `?.` ì—°ì‚°ì ì‚¬ìš©

### ì»¨í…ìŠ¤íŠ¸
```typescript
// í˜„ì¬ ì½”ë“œ (45ë²ˆ ì¤„)
const value = obj.property.nested; // ì˜¤ë¥˜: objê°€ nullì¼ ìˆ˜ ìˆìŒ
```

### ì‘ë‹µ ë°©ë²•
ì´ ëŒ“ê¸€ì— ì„ íƒì§€(A, B, C)ë¡œ ë‹µê¸€ì„ ë‹¬ì•„ì£¼ì„¸ìš”.

### íƒ€ì„ì•„ì›ƒ
**2024-01-15 12:00 UTC**ê¹Œì§€ ì‘ë‹µì´ ì—†ìœ¼ë©´ ì›Œí¬í”Œë¡œìš°ê°€ **ì´ ì´ìŠˆë¥¼ ê±´ë„ˆëœë‹ˆë‹¤**.

---
*ì›Œí¬í”Œë¡œìš° ì‹¤í–‰: `run-abc123` | ì§ˆë¬¸ ID: `q-456`*
```

**Slack ë©”ì‹œì§€ í˜•ì‹:**

```
ğŸ¤– *ì—ì´ì „íŠ¸ ì§ˆë¬¸* - Issue #123

ìë™í™” ì›Œí¬í”Œë¡œìš°ê°€ ì…ë ¥ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.

*ì§ˆë¬¸:* null ì°¸ì¡° ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•˜ëŠ” ë° ì–´ë–¤ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í• ê¹Œìš”?

*ì„ íƒì§€:*
â€¢ A) null ì²´í¬ ì¶”ê°€ - ê°„ë‹¨í•œ ê°€ë“œ ì ˆ
â€¢ B) ì¡°ê¸° ì´ˆê¸°í™” - ê°ì²´ê°€ ì¡´ì¬í•˜ë„ë¡ ë¦¬íŒ©í† ë§
â€¢ C) ì˜µì…”ë„ ì²´ì´ë‹ - `?.` ì—°ì‚°ì ì‚¬ìš©

ë‹µë³€: `/answer q-456 A` (ë˜ëŠ” B, C)

â° íƒ€ì„ì•„ì›ƒ: 2024-01-15 12:00 UTC (ì‘ë‹µ ì—†ìœ¼ë©´ ê±´ë„ˆëœ€)
```

#### 4. Webhook í•¸ë“¤ëŸ¬

ë‹¤ì–‘í•œ ì±„ë„ì—ì„œ ì‘ë‹µì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```typescript
interface WebhookHandler {
  // GitHub webhook (issue_comment ì´ë²¤íŠ¸)
  handleGitHubComment(payload: GitHubCommentPayload): Promise<void>;

  // Slack ì¸í„°ë™ì…˜ (ìŠ¬ë˜ì‹œ ëª…ë ¹ ë˜ëŠ” ë²„íŠ¼)
  handleSlackInteraction(payload: SlackInteractionPayload): Promise<void>;

  // ì¼ë°˜ ì‘ë‹µ ì—”ë“œí¬ì¸íŠ¸
  handleAnswer(questionId: string, answer: string, answeredBy: string): Promise<void>;
}
```

#### 5. íƒ€ì„ì•„ì›ƒ ìŠ¤ì¼€ì¤„ëŸ¬

íƒ€ì„ì•„ì›ƒì„ ì´ˆê³¼í•œ ì§ˆë¬¸ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```typescript
interface TimeoutScheduler {
  // íƒ€ì„ì•„ì›ƒëœ ì§ˆë¬¸ í™•ì¸ ë° ì²˜ë¦¬
  processTimeouts(): Promise<void>;

  // íƒ€ì„ì•„ì›ƒ ì•¡ì…˜ ì‹¤í–‰
  executeTimeoutAction(question: PendingQuestion): Promise<void>;
}

// íƒ€ì„ì•„ì›ƒ ì•¡ì…˜
type TimeoutAction =
  | { type: 'skip'; addLabel: string }
  | { type: 'default'; useAnswer: string }
  | { type: 'escalate'; notifyChannel: string; assignTo: string }
  | { type: 'fail'; markAs: 'auto-fix-failed' };
```

### MCP ë„êµ¬

#### `post_question`

ì§ˆë¬¸ì„ ë“±ë¡í•˜ê³  ì›Œí¬í”Œë¡œìš°ë¥¼ ì¼ì‹œì¤‘ì§€í•©ë‹ˆë‹¤.

```typescript
interface PostQuestionInput {
  issueNumber: number;
  question: string;
  options?: Array<{
    value: string;
    label: string;
    description?: string;
    isDefault?: boolean;
  }>;
  context?: string;
  notifyVia: ('github' | 'slack' | 'email')[];
  timeoutHours: number;
  timeoutAction: 'skip' | 'default' | 'escalate' | 'fail';
  defaultAnswer?: string;
  slackChannel?: string;
  slackMention?: string[];
  emailRecipients?: string[];
}

interface PostQuestionOutput {
  questionId: string;
  workflowRunId: string;
  status: 'pending';
  notificationsSent: string[];
  timeoutAt: string;
}
```

#### `check_answer`

ì§ˆë¬¸ì— ëŒ€í•œ ì‘ë‹µ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```typescript
interface CheckAnswerInput {
  questionId: string;
}

interface CheckAnswerOutput {
  status: 'pending' | 'answered' | 'timeout' | 'cancelled';
  answer?: string;
  answeredBy?: string;
  answeredAt?: string;
}
```

#### `cancel_question`

ëŒ€ê¸° ì¤‘ì¸ ì§ˆë¬¸ì„ ì·¨ì†Œí•©ë‹ˆë‹¤.

```typescript
interface CancelQuestionInput {
  questionId: string;
  reason?: string;
}

interface CancelQuestionOutput {
  success: boolean;
  previousStatus: string;
}
```

### ì›Œí¬í”Œë¡œìš° í†µí•©

```yaml
# ì›Œí¬í”Œë¡œìš° ì •ì˜ ì˜ˆì‹œ
name: autofix
triggers:
  - label_added: "auto-fix"
  - schedule: "0 */6 * * *"  # 6ì‹œê°„ë§ˆë‹¤

steps:
  - id: analyze
    tool: analyze_issue
    output: analysis

  - id: check_confidence
    condition: analysis.confidence < 80
    tool: post_question
    input:
      question: "{{ analysis.uncertainQuestion }}"
      options: "{{ analysis.suggestedOptions }}"
      notifyVia: [github, slack]
      timeoutHours: 24
      timeoutAction: skip
    suspend: true  # ì›Œí¬í”Œë¡œìš°ê°€ ì—¬ê¸°ì„œ ì¼ì‹œì¤‘ì§€

  - id: apply_fix
    tool: apply_code_fix
    input:
      approach: "{{ answer || analysis.defaultApproach }}"

  - id: run_checks
    tool: run_checks

  - id: create_pr
    tool: github_create_pr

on_resume:
  # ì‘ë‹µ ìˆ˜ì‹  ì‹œ í˜¸ì¶œ
  inject:
    answer: "{{ pendingQuestion.answer }}"
  goto: apply_fix

on_timeout:
  # íƒ€ì„ì•„ì›ƒ ì•¡ì…˜ì´ 'skip'ì¼ ë•Œ í˜¸ì¶œ
  tool: update_github_issue
  input:
    addLabels: ["auto-fix-skip"]
    addComment: "íƒ€ì„ì•„ì›ƒ ê¸°ê°„ ë‚´ ì‘ë‹µì´ ì—†ì–´ ê±´ë„ˆëœë‹ˆë‹¤."
```

### ì €ì¥ì†Œ ì˜µì…˜

| ì˜µì…˜ | ì¥ì  | ë‹¨ì  | ì í•©í•œ ê²½ìš° |
|------|------|------|------------|
| **SQLite** | ê°„ë‹¨, íŒŒì¼ ê¸°ë°˜, ì„¤ì • ë¶ˆí•„ìš” | ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ë§Œ | ì†Œê·œëª¨ íŒ€, ë¡œì»¬ ê°œë°œ |
| **PostgreSQL** | ê²¬ê³ í•¨, í™•ì¥ ê°€ëŠ¥ | ì„¤ì • í•„ìš” | í”„ë¡œë•ì…˜ |
| **Redis** | ë¹ ë¦„, TTL ì§€ì› | ë°ì´í„° íœ˜ë°œì„± | ë†’ì€ ì²˜ë¦¬ëŸ‰ |
| **GitHub Issues** | ì¶”ê°€ ì¸í”„ë¼ ë¶ˆí•„ìš” | ì¿¼ë¦¬ ì œí•œì  | GitHub ì¤‘ì‹¬ ì›Œí¬í”Œë¡œìš° |

### ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

1. **ì‘ë‹µ ê²€ì¦**
   - ì‘ë‹µìì˜ ê¶Œí•œ í™•ì¸
   - ì‘ë‹µì´ ì˜ˆìƒ ì˜µì…˜ê³¼ ì¼ì¹˜í•˜ëŠ”ì§€ ê²€ì¦
   - ì‘ë‹µ ì†ë„ ì œí•œ

2. **ì§ˆë¬¸ ë‚´ìš©**
   - ê³µê°œ ì±„ë„ì— ë¯¼ê°í•œ ì½”ë“œ ë…¸ì¶œ ê¸ˆì§€
   - ê²Œì‹œ ì „ ì»¨í…ìŠ¤íŠ¸ ì •ì œ

3. **Webhook ë³´ì•ˆ**
   - Webhook ì„œëª… ê²€ì¦ (GitHub, Slack)
   - HTTPS ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
   - ìš”ì²­ ìœ íš¨ì„± ê²€ì‚¬ êµ¬í˜„

### ëª¨ë‹ˆí„°ë§ ë° ê´€ì¸¡ì„±

```typescript
interface Metrics {
  // ì§ˆë¬¸ ë©”íŠ¸ë¦­
  questionsPosted: Counter;
  questionsAnswered: Counter;
  questionsTimedOut: Counter;
  answerLatency: Histogram;  // ì‘ë‹µê¹Œì§€ ì‹œê°„

  // ì›Œí¬í”Œë¡œìš° ë©”íŠ¸ë¦­
  workflowsSuspended: Counter;
  workflowsResumed: Counter;
  avgSuspensionDuration: Gauge;
}

interface Alerts {
  // ì§ˆë¬¸ì´ ìŒ“ì¼ ë•Œ ì•Œë¦¼
  pendingQuestionsThreshold: number;  // ì˜ˆ: > 10

  // íƒ€ì„ì•„ì›ƒ ë¹„ìœ¨ì´ ë†’ì„ ë•Œ ì•Œë¦¼
  timeoutRateThreshold: number;  // ì˜ˆ: > 30%
}
```

### êµ¬í˜„ ë‹¨ê³„

#### Phase 1: GitHub ì „ìš© (MVP)
- GitHub ì´ìŠˆ ëŒ“ê¸€ë¡œ ì§ˆë¬¸ ê²Œì‹œ
- ëŒ“ê¸€ ë‹µê¸€ì—ì„œ ì‘ë‹µ íŒŒì‹±
- ê°„ë‹¨í•œ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ (ë¼ë²¨ ì¶”ê°€, ê±´ë„ˆë›°ê¸°)

#### Phase 2: ë©€í‹° ì±„ë„
- Slack í†µí•© ì¶”ê°€
- ì´ë©”ì¼ ì•Œë¦¼ ì¶”ê°€
- í†µí•© ì‘ë‹µ ì²˜ë¦¬

#### Phase 3: ëŒ€ì‹œë³´ë“œ
- ëŒ€ê¸° ì¤‘ì¸ ì§ˆë¬¸ìš© ì›¹ UI
- ì¼ê´„ ì‘ë‹µ ê¸°ëŠ¥
- ë¶„ì„ ë° ë¦¬í¬íŒ…

## ê´€ë ¨ ë¬¸ì„œ

- [ì´ˆê¸° ì„¤ì • ê°€ì´ë“œ](./SETUP.ko.md) - ì´ˆê¸° ì„¤ì •
- [ì›Œí¬í”Œë¡œìš° ì˜ˆì‹œ](../README.ko.md#ì›Œí¬í”Œë¡œìš°-ì˜ˆì‹œ) - ì‚¬ìš© ì˜ˆì‹œ

## í–¥í›„ ê³ ë ¤ì‚¬í•­

- **LLM ì§€ì› ëª…í™•í™”**: AIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¶ˆëª…í™•í•œ ì§ˆë¬¸ ì¬êµ¬ì„±
- **ìë™ ì‘ë‹µ ì œì•ˆ**: ê³¼ê±° ìœ ì‚¬ ì§ˆë¬¸ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ë‹µ ì œì•ˆ
- **ìŠ¹ì¸ ì›Œí¬í”Œë¡œìš°**: ì¤‘ìš”í•œ ë³€ê²½ì— ëŒ€í•œ ë‹¤ì¤‘ ìŠ¹ì¸
- **SLA ì¶”ì **: íŒ€/ê°œì¸ë³„ ì‘ë‹µ ì‹œê°„ ì¶”ì 
